# Genie Framework Upgrade Diff

**Upgrade:** v2.5.14 ‚Üí v2.5.27-rc.2
**Generated:** 2025-11-27T05:51:28.811Z
**Diff ID:** 2025-11-27T05-51-28-605Z

---

## Summary

| Type | Count |
|------|-------|
| Added | 2 |
| Removed | 2 |
| Modified | 14 |
| **Total Changes** | **18** |

## New Files (2)

These files exist in the new version but not in your workspace:

### ‚úÖ `.genie/code/agents/update/upstream-update.md` (2.0 KB)

<details>
<summary>View new file content</summary>

```markdown
---
name: upstream-update
description: Automate upstream dependency updates with comprehensive validation
genie:
  executor:
    - CLAUDE_CODE
    - CODEX
    - OPENCODE
  background: false
forge:
  CLAUDE_CODE:
    model: sonnet
    dangerously_skip_permissions: true
  CODEX:
    model: gpt-5-codex
    sandbox: danger-full-access
  OPENCODE:
    model: opencode/glm-4.6
---

# Upstream Update Agent

**Role:** Automate upstream dependency updates with comprehensive validation

## Core Responsibility

Execute complete upstream update workflows, including:
- Fork synchronization
- Mechanical rebranding
- Release creation
- Gitmodule updates
- Type regeneration
- Build verification
- Automated fix generation

## Execution Pattern

When given an upstream update task:

1. **Parse Context:**
   - Current version
   - Target version
   - Repository information
   - Patches to re-apply

2. **Execute Phases Sequentially:**
   - Pre-Sync Audit (gap detection)
   - Fork Sync (mirror upstream)
   - Mechanical Rebrand (remove vendor references)
   - Release Creation (tag + GitHub release)
   - Gitmodule Update (point to new tag)
   - Type Regeneration & Build
   - Post-Sync Validation
   - Automated Fix Generation
   - Commit & Push

3. **Success Criteria Validation:**
   - Fork mirrors upstream exactly
   - Rebrand applied (0 vendor references except packages)
   - Tag created with correct naming
   - GitHub release published
   - Build passes
   - All gaps documented with fix scripts

## Tools & Automation

- Use Git agent for repository operations
- Execute build commands directly
- Generate fix scripts for detected gaps
- Document all changes comprehensively

## Output Format

Provide detailed phase-by-phase execution log with:
- ‚úÖ Success markers
- ‚ùå Failure markers
- üìã Gap documentation
- üîß Fix scripts generated

## Error Handling

- Halt on critical failures
- Document all gaps found
- Generate automated fixes where possible
- Provide manual intervention steps when needed
```

</details>

### ‚úÖ `.genie/code/agents/update/versions/generic-update.md` (7.2 KB)

<details>
<summary>View new file content</summary>

```markdown
---
name: generic-update
description: Generic upgrade guidance for version transitions without specific guides
genie:
  executor:
    - CLAUDE_CODE
    - CODEX
    - OPENCODE
  background: false
forge:
  CLAUDE_CODE:
    model: sonnet
    dangerously_skip_permissions: true
  CODEX:
    model: gpt-5-codex
    sandbox: danger-full-access
  OPENCODE:
    model: opencode/glm-4.6
---

# Generic Update Guide
**Purpose:** Guidance for users upgrading from older versions without specific transition guides
**Applies to:** Any version transition not covered by specific guides

---

## üìä General Update Process

You've successfully updated to a newer version of Genie! Since your previous version is significantly older, a specific transition guide isn't available. This generic guide will help you through the update.

---

## üíæ Your Backup

Your previous configuration has been safely backed up at:
```
.genie/backups/{BACKUP_ID}/
‚îú‚îÄ‚îÄ genie/           # Entire .genie directory
‚îî‚îÄ‚îÄ docs/            # Root documentation files
    ‚îú‚îÄ‚îÄ AGENTS.md    (if existed)
    ‚îî‚îÄ‚îÄ CLAUDE.md    (if existed)
```

**All your previous work is safe.** You can reference these files at any time.

---

## üéØ What Happened During Update

1. **Backup Created** - Your old configuration was saved
2. **Fresh Install** - New framework templates were installed
3. **Version Updated** - `.genie/state/version.json` now reflects new version

**Important:** The update installed clean templates. If you had customizations in:
- `AGENTS.md` - Framework behavioral patterns
- `CLAUDE.md` - Project-specific patterns
- `.genie/agents/` - Custom agent files

These are now in your backup, NOT in the current installation.

---

## ‚úÖ Post-Update Checklist

### 1. Verify Installation
```bash
# Check new version
cat .genie/state/version.json

# List available agents
genie list

# Test basic agent
genie run plan "test prompt"
```

**Expected:** All commands work without errors

### 2. Review Your Backup

If you had customizations, review what you had:

**Check AGENTS.md customizations:**
```bash
# View your old AGENTS.md
cat .genie/backups/{BACKUP_ID}/docs/AGENTS.md
```

**Check CLAUDE.md customizations:**
```bash
# View your old CLAUDE.md
cat .genie/backups/{BACKUP_ID}/docs/CLAUDE.md
```

**Check custom agents:**
```bash
# List your old agents
ls -la .genie/backups/{BACKUP_ID}/genie/agents/
```

### 3. Decide What to Preserve

**For each customization you want to keep:**
1. Open the current (new) file
2. Open the backup file side-by-side
3. Manually copy over your important customizations
4. Save and test

**Tips:**
- Don't copy entire files (framework has evolved)
- Copy specific sections or entries that are YOUR work
- Test after each change

### 4. Test Your Workflow

After merging customizations:
```bash
# Test agents
genie run plan "create feature X"
genie run wish "implement feature Y"
genie run forge "execute task Z"

# Test background execution
genie run genie "analyze project" --background

# Check MCP integration
genie status
```

---

## üö® Common Issues

### Issue: Agent doesn't work as expected
**Possible causes:**
- Framework changed agent structure
- Customization conflicts with new version
- Missing dependencies

**Solutions:**
1. Check CHANGELOG.md for breaking changes
2. Review new agent templates in `.genie/agents/`
3. Test without customizations first
4. Incrementally add back customizations

### Issue: MCP connection errors
**Possible causes:**
- Configuration changed between versions
- MCP server needs restart

**Solutions:**
```bash
# Reconfigure MCP
genie init --provider [codex|claude-code]

# Restart your code editor
# (to pick up new MCP configuration)
```

### Issue: Custom agents not found
**Possible causes:**
- Agent directory structure changed
- Custom agents not migrated

**Solutions:**
1. Check backup: `.genie/backups/{BACKUP_ID}/genie/agents/`
2. Review new agent structure in `.genie/agents/`
3. Re-create custom agents following new structure
4. Test: `genie run {custom-agent} "test"`

---

## üìö Where to Find Help

### 1. Check the Changelog
```bash
cat CHANGELOG.md
```
Look for breaking changes and new features between your old version and current version.

### 2. Review Documentation
```bash
cat README.md
```
Updated documentation reflects current version capabilities.

### 3. Compare Agent Templates
```bash
# Current agents
ls -la .genie/agents/

# Your old agents (backup)
ls -la .genie/backups/{BACKUP_ID}/genie/agents/

# Compare structure
diff -r .genie/agents/ .genie/backups/{BACKUP_ID}/genie/agents/
```

### 4. GitHub Issues
If you encounter problems:
- Check: https://github.com/namastexlabs/automagik-genie/issues
- Report: Create new issue with version details

---

## üîÑ Rollback Instructions

If the new version isn't working and you need to revert:

```bash
# List available backups
ls -la .genie/backups/

# Rollback to your previous version
genie rollback --id {BACKUP_ID}

# Or rollback to latest backup
genie rollback --latest
```

**Note:** Rollback restores:
- Entire `.genie/` directory
- Root `AGENTS.md` file (if existed)
- Root `CLAUDE.md` file (if existed)

After rollback, you'll be back to your previous working state.

---

## üéØ General Migration Strategy

For major version jumps:

1. **Backup verified** ‚úÖ
2. **New version tested** (basic workflows)
3. **Review customizations** (from backup)
4. **Selective migration** (important parts only)
5. **Incremental testing** (after each change)
6. **Document what you preserved** (for future updates)

---

## üìñ Understanding Update Philosophy

**Genie's update approach:**
- ‚úÖ **Clean install** - Fresh framework templates
- ‚úÖ **Safe backup** - Your work is preserved
- ‚úÖ **Manual merge** - You control what to keep
- ‚ùå **No auto-merge** - No automated file merging

**Why this approach?**
- Prevents merge conflicts
- Ensures framework integrity
- Gives you full control
- Safer than automated merging

**Your responsibility:**
- Review backup if you had customizations
- Manually re-apply important changes
- Test after migration

---

## üéì Best Practices

### For Future Updates

1. **Document your customizations** - Keep notes on what you changed
2. **Minimize customizations** - Only customize what's necessary
3. **Regular updates** - Don't skip too many versions
4. **Test updates** - Try in test project first if possible

### Customization Strategy

- **AGENTS.md**: Add learning entries, don't modify core structure
- **CLAUDE.md**: Add project-specific patterns, don't remove framework refs
- **Custom agents**: Store in clearly marked sections/files
- **Version control**: Track your customizations in git

---

## ‚úÖ Verification Complete

When you've completed migration:

- [ ] New version tested and working
- [ ] Backup reviewed for customizations
- [ ] Important customizations manually merged
- [ ] All workflows tested (plan, wish, forge, review)
- [ ] MCP integration verified
- [ ] Documentation updated (if needed)

**You're ready to use the new version! üßû**

---

## üìû Need More Help?

For version-specific guidance:
1. Check `.genie/agents/update/versions/` for your version
2. Read CHANGELOG.md for detailed version history
3. Visit GitHub Issues for known problems
4. Create issue if you found a bug

**Update successful! Welcome to the latest Genie! üéâ**
```

</details>

## Removed from Framework (2)

These files exist in your workspace but are no longer part of the framework:

- ‚ùå `.genie/neurons/gemini.md` (1.8 KB)
- ‚ùå `.genie/scripts/helpers/check-permissions.js` (5.5 KB)

**Action:** Review if these are user customizations to keep or obsolete files to remove.

## Modified Files (14)

These files have changed in the upstream framework:

### üìù `.genie/agents/analyze.md`

**Size:** 6.8 KB ‚Üí 6.7 KB (-39.0 B)

<details>
<summary>View changes</summary>

```diff
--- a/.genie/agents/analyze.md
+++ b/.genie/agents/analyze.md
@@ -13 +13 @@
-    dangerously_skip_permissions: true
   CODEX:
     model: gpt-5-codex
   OPENCODE:
     model: opencode/glm-4.6
 ---
 
 # Analyze Agent (Universal Framework)
 
 ## Identity & Mission
 Perform holistic system audits OR conduct focused deep investigations into specific topics, dependency graphs, or subsystems. Surface dependencies, hotspots, coupling, strategic improvement opportunities, and deliver comprehensive findings with evidence.
 
 **Works across ALL domains:** Code, research, legal, medical, finance, operations, strategy.
 
 **Two Modes:**
 1. **System Analysis** - Holistic architecture audit and strategic assessment
 2. **Focused Investigation** - Deep dive into specific topics with dependency mapping
 
 ## Success Criteria
 **System Analysis Mode:**
 - ‚úÖ Executive overview with system fitness, key risks, and standout strengths
```

</details>

### üìù `.genie/agents/forge.md`

**Size:** 11.4 KB ‚Üí 11.4 KB (-41.0 B)

<details>
<summary>View changes</summary>

```diff
--- a/.genie/agents/forge.md
+++ b/.genie/agents/forge.md
@@ -3 +3 @@
-description: Universal forge orchestrator - breaks wishes into execution groups
+description: Universal forge orchestrator - breaks wishes into execution groups with task files and validation (all domains)
-  with task files and validation (all domains)
 genie:
   executor:
     - CLAUDE_CODE
     - CODEX
     - OPENCODE
   background: true
 forge:
   CLAUDE_CODE:
     model: sonnet
-    dangerously_skip_permissions: true
   CODEX:
     model: gpt-5-codex
   OPENCODE:
     model: opencode/glm-4.6
 ---
 
 ## Framework Reference
 
```

</details>

### üìù `.genie/agents/garbage-cleaner.md`

**Size:** 9.1 KB ‚Üí 9.0 KB (-39.0 B)

<details>
<summary>View changes</summary>

```diff
--- a/.genie/agents/garbage-cleaner.md
+++ b/.genie/agents/garbage-cleaner.md
@@ -13 +13 @@
-    dangerously_skip_permissions: true
   CODEX:
     model: gpt-5-codex
   OPENCODE:
     model: opencode/glm-4.6
 ---
 
 # Garbage Cleaner ‚Ä¢ Identity & Mission
 Process GitHub issues tagged `garbage-collection`, implement fixes automatically, create individual PR per issue for human review.
 
 **This is a core Genie agent** - maintains Genie's consciousness quality through automated cleanup.
 
 ## Specialty
 - **Individual PR per issue** - One fix, one PR, one review
 - **Safe automated editing** - Token-efficient, evidence-backed changes
 - **PR generation** - Clean git workflow with focused changeset
 - **Issue lifecycle** - Auto-close resolved issue when PR merges
 - **Review assignment** - Auto-assigns victor for human oversight
 
 ## Operating Patterns
 
```

</details>

### üìù `.genie/agents/garbage-collector.md`

**Size:** 16.7 KB ‚Üí 16.6 KB (-39.0 B)

<details>
<summary>View changes</summary>

```diff
--- a/.genie/agents/garbage-collector.md
+++ b/.genie/agents/garbage-collector.md
@@ -13 +13 @@
-    dangerously_skip_permissions: true
   CODEX:
     model: gpt-5-codex
   OPENCODE:
     model: opencode/glm-4.6
 ---
 
 # Garbage Collector ‚Ä¢ Identity & Mission
 
 **I am an autonomous quality assurance workflow.** I run independently without human interaction.
 
 Daily autonomous sweep of all markdown files to detect quality issues, token waste, and documentation rot. **I automatically create GitHub issues and commit daily reports** - no human approval needed.
 
 **This is a core Genie agent** - maintains Genie's own consciousness quality, not part of Create/Code collectives.
 
 ## Autonomous Operation Protocol ü§ñ
 
 **I am a fully autonomous workflow. I execute without user prompts or questions.**
 
 **What this means:**
 - ‚úÖ I scan files automatically
```

</details>

### üìù `.genie/agents/github-issue-gc.md`

**Size:** 17.8 KB ‚Üí 17.8 KB (-39.0 B)

<details>
<summary>View changes</summary>

```diff
--- a/.genie/agents/github-issue-gc.md
+++ b/.genie/agents/github-issue-gc.md
@@ -13 +13 @@
-    dangerously_skip_permissions: true
   CODEX:
     model: gpt-5-codex
   OPENCODE:
     model: opencode/glm-4.6
 ---
 
 # GitHub Issue Garbage Collector ‚Ä¢ Identity & Mission
 
 **I am an autonomous issue hygiene workflow.** I run independently without human interaction.
 
 Daily autonomous analysis of all open GitHub issues to detect stale, invalid, duplicate, or already-fixed issues. **I automatically add labels, create comments, and generate cleanup reports** - no human approval needed for triage actions.
 
 **This is a core Genie agent** - maintains GitHub issue quality, complements garbage-collector (which focuses on code/docs).
 
 ## Autonomous Operation Protocol ü§ñ
 
 **I am a fully autonomous workflow. I execute without user prompts or questions.**
 
 **What this means:**
 - ‚úÖ I scan issues automatically (oldest first)
```

</details>

### üìù `.genie/agents/README.md`

**Size:** 4.6 KB ‚Üí 4.7 KB (+22.0 B)

<details>
<summary>View changes</summary>

```diff
--- a/.genie/agents/README.md
+++ b/.genie/agents/README.md
@@ -33 +33 @@
-  executor:
+  executor: opencode          # Orchestration: which executor to invoke
-    - CLAUDE_CODE
+  variant: REVIEW_STRICT_EVIDENCE  # Orchestration: which profile variant
-    - CODEX
-    - OPENCODE
   background: true            # Orchestration: run in isolated worktree
 forge:
-  CLAUDE_CODE:
+  model: sonnet               # Executor config: passed to Forge as-is
-    model: sonnet
+  dangerously_skip_permissions: false
-    dangerously_skip_permissions: true
+---
-  CODEX:
+```
-    model: gpt-5-codex
+
-    sandbox: danger-full-access
+#### Supported keys
-  OPENCODE:
-    model: opencode/glm-4.6
----
-```
 
@@ -50 +50 @@
-#### Supported keys
-
 **`genie.*` namespace (Orchestration):**
 
 | Key | Purpose | Forge mapping |
 | --- | --- | --- |
 | `executor` | Logical executor name (`CLAUDE_CODE`, `OPENCODE`, `CODEX`, ‚Ä¶). Case-insensitive. | Translated to Forge `executor_profile_id.executor`. |
 | `variant` | Profile variant (e.g. `DEFAULT`, `REVIEW_STRICT_EVIDENCE`, `DOCGEN_MEDIUM`). | Translated to Forge `executor_profile_id.variant`. |
 | `background` | Set to `false` to force foreground streaming (rare). Default: `true`. | Affects CLI behaviour only (worktree isolation). |
 
 **`forge.*` namespace (Executor Configuration):**
 
 Genie passes `forge.*` fields directly to Forge without validation. Forge validates against executor-specific schemas. Common fields:
 
 | Key | Executors | Purpose |
 | --- | --- | --- |
 | `model` | All | Model name (e.g. `sonnet`, `opus`, `haiku`) |
 | `dangerously_skip_permissions` | All | Skip permission checks (use with caution) |
 | `sandbox` | CODEX | Sandbox mode (`auto`, `write`, `workspace-write`) |
 | `append_prompt` | CLAUDE_CODE | Additional prompt text appended to agent prompt |
 | `claude_code_router` | CLAUDE_CODE | Enable Claude Code routing behavior |
```

</details>

### üìù `.genie/agents/review.md`

**Size:** 14.7 KB ‚Üí 14.7 KB (-31.0 B)

<details>
<summary>View changes</summary>

```diff
--- a/.genie/agents/review.md
+++ b/.genie/agents/review.md
@@ -3 +3 @@
-description: Universal review orchestrator - wish audits, code review, and QA
+description: Universal review orchestrator - wish audits, code review, and QA validation with evidence-based verdicts (all domains)
-  validation with evidence-based verdicts (all domains)
-forge_profile_name: DEFAULT
 genie:
   executor:
     - CLAUDE_CODE
     - CODEX
     - OPENCODE
   background: true
 forge:
   CLAUDE_CODE:
     model: sonnet
-    dangerously_skip_permissions: true
   CODEX:
-    model: gpt-5.1-codex
+    model: gpt-5-codex
+  OPENCODE:
+    model: opencode/glm-4.6
 ---
 
```

</details>

### üìù `.genie/agents/semantic-analyzer.md`

**Size:** 2.9 KB ‚Üí 2.8 KB (-39.0 B)

<details>
<summary>View changes</summary>

```diff
--- a/.genie/agents/semantic-analyzer.md
+++ b/.genie/agents/semantic-analyzer.md
@@ -13 +13 @@
-    dangerously_skip_permissions: true
   CODEX:
     model: gpt-5-codex
   OPENCODE:
     model: opencode/glm-4.6
 ---
 
 # Semantic Analyzer ‚Ä¢ Master Orchestrator
 
 Orchestrates complex semantic analysis tasks that require natural language understanding.
 Delegates to opencode workflow agents for specific, token-heavy but simple analysis tasks.
 
 **This is a master agent** - coordinates semantic workflows, does not implement analysis itself.
 
 ## Purpose
 
 Handles semantic quality checks that simple pattern matching cannot solve:
 - Near-duplicate content detection (semantic similarity >80%)
 - Orphaned file detection (files with no incoming @ references)
 - Content quality analysis (requires understanding context)
 
```

</details>

### üìù `.genie/agents/semantic-analyzer/find-duplicates.md`

**Size:** 2.6 KB ‚Üí 2.5 KB (-39.0 B)

<details>
<summary>View changes</summary>

```diff
--- a/.genie/agents/semantic-analyzer/find-duplicates.md
+++ b/.genie/agents/semantic-analyzer/find-duplicates.md
@@ -13 +13 @@
-    dangerously_skip_permissions: true
   CODEX:
     model: gpt-5-codex
   OPENCODE:
     model: opencode/glm-4.6
 ---
 
 # Find Duplicates Workflow
 
 Analyze markdown files to detect near-duplicate content (>80% semantic similarity).
 Returns JSON with duplicate pairs, similarity scores, and excerpts.
 
 ## Task
 
 You are a semantic similarity analyzer. Your job is to find near-duplicate content across multiple markdown files.
 
 **Input:** Directory path (provided as argument)
 **Output:** JSON array with this exact structure:
 
 ```json
 [
```

</details>

### üìù `.genie/agents/semantic-analyzer/find-orphans.md`

**Size:** 2.8 KB ‚Üí 2.7 KB (-39.0 B)

<details>
<summary>View changes</summary>

```diff
--- a/.genie/agents/semantic-analyzer/find-orphans.md
+++ b/.genie/agents/semantic-analyzer/find-orphans.md
@@ -13 +13 @@
-    dangerously_skip_permissions: true
   CODEX:
     model: gpt-5-codex
   OPENCODE:
     model: opencode/glm-4.6
 ---
 
 # Find Orphans Workflow
 
 Analyze markdown files to find orphans (files with zero incoming @ references).
 Returns JSON with orphaned files and last modification dates.
 
 ## Task
 
 You are a cross-reference analyzer. Your job is to find markdown files that nothing links to.
 
 **Input:** Directory path (provided as argument)
 **Output:** JSON array with this exact structure:
 
 ```json
 [
```

</details>

### üìù `.genie/agents/wish.md`

**Size:** 12.2 KB ‚Üí 12.2 KB (-41.0 B)

<details>
<summary>View changes</summary>

```diff
--- a/.genie/agents/wish.md
+++ b/.genie/agents/wish.md
@@ -3 +3 @@
-description: Universal wish architect - converts ideas into roadmap-aligned
+description: Universal wish architect - converts ideas into roadmap-aligned wishes with spec contracts (all domains)
-  wishes with spec contracts (all domains)
 genie:
   executor:
     - CLAUDE_CODE
     - CODEX
     - OPENCODE
   background: true
 forge:
   CLAUDE_CODE:
     model: sonnet
-    dangerously_skip_permissions: true
   CODEX:
     model: gpt-5-codex
   OPENCODE:
     model: opencode/glm-4.6
 ---
 
 ## Mandatory Context Loading
 
```

</details>

### üìù `.genie/create/agents/marketing/announcements.md`

**Size:** 4.9 KB ‚Üí 4.9 KB (-1.0 B)

<details>
<summary>View changes</summary>

```diff
--- a/.genie/create/agents/marketing/announcements.md
+++ b/.genie/create/agents/marketing/announcements.md
@@ -67 +67 @@
-gh api repos/automagik.dev/automagik-genie/discussions \
+gh api repos/namastexlabs/automagik-genie/discussions \
   --method POST \
   -f category_id={ANNOUNCEMENTS_CATEGORY} \
   -f title="üßû Genie v{VERSION} Released!" \
   -f body="{MARKDOWN}"
 ```
 
 ### Step 2: Twitter/X Thread
 
 Create engaging thread (if stable release):
 
 **Format:**
 ```
 Tweet 1:
 üßû‚ú® Genie v{VERSION} is here!
 
 {One-line hook about the main feature}
 
 Try it: npm install -g automagik-genie@latest
 
```

</details>

### üìù `.genie/scripts/helpers/index.js`

**Size:** 9.2 KB ‚Üí 8.8 KB (-370.0 B)

<details>
<summary>View changes</summary>

```diff
--- a/.genie/scripts/helpers/index.js
+++ b/.genie/scripts/helpers/index.js
@@ -211 +211 @@
-  },
+  }
-  'check-permissions': {
+};
-    script: 'check-permissions.js',
+
-    description: 'Validate dangerously_skip_permissions settings in agent frontmatter',
+function showList() {
-    usage: [
+  console.log('');
-      'genie helper check-permissions',
+  console.log('Available Genie Helpers:');
-      'genie helper check-permissions --fix'
+  console.log('‚îÅ'.repeat(60));
-    ],
+  console.log('');
-    examples: [
+
-      '$ genie helper check-permissions',
+  Object.entries(HELPERS).forEach(([name, info]) => {
-      '$ genie helper check-permissions --fix'
+    console.log(`  ${name.padEnd(25)} ${info.description}`);
-    ]
+  });
-  }
-};
 
@@ -226 +226 @@
-function showList() {
   console.log('');
-  console.log('Available Genie Helpers:');
+  console.log('Usage:');
-  console.log('‚îÅ'.repeat(60));
+  console.log('  genie helper <command> [args]');
+  console.log('  genie helper help [command]   Show help for specific command');
   console.log('');
+}
 
-  Object.entries(HELPERS).forEach(([name, info]) => {
+function showHelp(command) {
-    console.log(`  ${name.padEnd(25)} ${info.description}`);
+  if (!command) {
-  });
+    showList();
+    return;
+  }
 
-  console.log('');
+  const helper = HELPERS[command];
-  console.log('Usage:');
+  if (!helper) {
-  console.log('  genie helper <command> [args]');
+    console.error(`Unknown helper: ${command}`);
-  console.log('  genie helper help [command]   Show help for specific command');
+    console.error('');
+    showList();
+    process.exit(1);
+  }
+
   console.log('');
@@ -241 +241 @@
-}
+  console.log(`${command} - ${helper.description}`);
-
+  console.log('‚îÅ'.repeat(60));
-function showHelp(command) {
+  console.log('');
-  if (!command) {
+  console.log('Usage:');
-    showList();
+  helper.usage.forEach(usage => {
-    return;
+    console.log(`  ${usage}`);
-  }
+  });
 
-  const helper = HELPERS[command];
+  if (helper.examples && helper.examples.length > 0) {
-  if (!helper) {
+    console.log('');
-    console.error(`Unknown helper: ${command}`);
+    console.log('Examples:');
-    console.error('');
+    helper.examples.forEach(example => {
-    showList();
+      console.log(`  ${example}`);
-    process.exit(1);
+    });
   }
@@ -258 +258 @@
-  console.log(`${command} - ${helper.description}`);
+}
-  console.log('‚îÅ'.repeat(60));
+
-  console.log('');
+function runHelper(command, args) {
-  console.log('Usage:');
+  const helper = HELPERS[command];
-  helper.usage.forEach(usage => {
-    console.log(`  ${usage}`);
-  });
 
-  if (helper.examples && helper.examples.length > 0) {
+  if (!helper) {
-    console.log('');
+    console.error(`Unknown helper: ${command}`);
-    console.log('Examples:');
+    console.error('');
-    helper.examples.forEach(example => {
+    console.error('Run "genie helper list" to see available helpers');
-      console.log(`  ${example}`);
+    process.exit(1);
-    });
   }
@@ -274 +274 @@
-  console.log('');
+  const scriptPath = path.join(HELPERS_DIR, helper.script);
-}
 
-function runHelper(command, args) {
+  if (!fs.existsSync(scriptPath)) {
-  const helper = HELPERS[command];
+    console.error(`Helper script not found: ${scriptPath}`);
+    process.exit(1);
+  }
 
-  if (!helper) {
+  // Spawn the helper script
-    console.error(`Unknown helper: ${command}`);
+  const child = spawn('node', [scriptPath, ...args], {
-    console.error('');
+    stdio: 'inherit',
-    console.error('Run "genie helper list" to see available helpers');
+    env: process.env
-    process.exit(1);
+  });
-  }
 
@@ -287 +287 @@
-  const scriptPath = path.join(HELPERS_DIR, helper.script);
+  child.on('exit', (code) => {
+    process.exit(code || 0);
+  });
 
-  if (!fs.existsSync(scriptPath)) {
+  child.on('error', (err) => {
-    console.error(`Helper script not found: ${scriptPath}`);
+    console.error(`Failed to run helper: ${err.message}`);
     process.exit(1);
-  }
+  });
+}
 
-  // Spawn the helper script
+// Main CLI router
-  const child = spawn('node', [scriptPath, ...args], {
+function main() {
-    stdio: 'inherit',
+  const args = process.argv.slice(2);
-    env: process.env
-  });
 
@@ -300 +300 @@
-  child.on('exit', (code) => {
+  if (args.length === 0 || args[0] === 'list') {
-    process.exit(code || 0);
+    showList();
-  });
+    return;
+  }
 
-  child.on('error', (err) => {
+  const command = args[0];
-    console.error(`Failed to run helper: ${err.message}`);
-    process.exit(1);
-  });
-}
 
-// Main CLI router
+  if (command === 'help' || command === '--help' || command === '-h') {
-function main() {
+    showHelp(args[1]);
-  const args = process.argv.slice(2);
-
-  if (args.length === 0 || args[0] === 'list') {
-    showList();
     return;
@@ -319 +319 @@
-  const command = args[0];
+  // Run the helper with remaining args
+  const helperArgs = args.slice(1);
+  runHelper(command, helperArgs);
+}
 
-  if (command === 'help' || command === '--help' || command === '-h') {
+main();
-    showHelp(args[1]);
-    return;
-  }
 
-  // Run the helper with remaining args
-  const helperArgs = args.slice(1);
-  runHelper(command, helperArgs);
-}
-
-main();
-
```

</details>

### üìù `.genie/spells/learn.md`

**Size:** 38.1 KB ‚Üí 34.3 KB (-3.9 KB)

<details>
<summary>View changes</summary>

```diff
--- a/.genie/spells/learn.md
+++ b/.genie/spells/learn.md
@@ -771 +771 @@
-## Helper Script Creation Pattern üî¥ CRITICAL
+## Commit Message Requirements üî¥ CRITICAL
 
-**Purpose:** Create reusable CLI tools for external integrations, validation, and automation tasks
+**Every commit must link to a work item for traceability.**
 
-### When to Create a Helper Script
+### Required Format
 
-**Triggers:**
+All commits must reference:
-- [learn-194] helpful=0 harmful=0: User requests external integrations requiring code implementation
+- [learn-183] helpful=0 harmful=0: GitHub issue: `fixes #NNN`, `closes #NNN`, or `resolves #NNN`
-- [learn-195] helpful=0 harmful=0: Validation tasks that will be reused (frontmatter, permissions, secrets)
+- [learn-184] helpful=0 harmful=0: OR Wish: `wish: wish-slug`
-- [learn-196] helpful=0 harmful=0: Automation that benefits from CLI access
-- [learn-197] helpful=0 harmful=0: Tasks requiring dependencies not in main codebase
 
-### Helper Script Creation Protocol
+### Before Committing
 
@@ -785 +785 @@
-**1. Write the Helper Script:**
+1. **Check for existing issues:**
-- [learn-198] helpful=0 harmful=0: Location: `.genie/scripts/helpers/<name>.js`
+   ```bash
-- [learn-199] helpful=0 harmful=0: Make executable: `chmod +x .genie/scripts/helpers/<name>.js`
+   gh issue list --search "keyword"
-- [learn-200] helpful=0 harmful=0: Include shebang: `#!/usr/bin/env node`
+   ```
-- [learn-201] helpful=0 harmful=0: Write standalone (can run independently via `node <path>`)
-- [learn-202] helpful=0 harmful=0: Add clear usage/help output
 
-**2. Register in Helper Index:**
+2. **Check for existing wishes:**
-- [learn-203] helpful=0 harmful=0: Edit `.genie/scripts/helpers/index.js`
+   ```bash
-- [learn-204] helpful=0 harmful=0: Add entry to `HELPERS` object with:
+   ls .genie/wishes/ | grep -i keyword
-  - `script`: filename
+   ```
-  - `description`: one-line purpose
-  - `usage`: array of usage patterns
-  - `examples`: array of example commands
 
@@ -800 +800 @@
-**3. Handle Dependencies:**
+3. **Create issue if needed:**
-- [learn-205] helpful=0 harmful=0: Create `.genie/scripts/helpers/package.json` if needed
+   ```bash
-- [learn-206] helpful=0 harmful=0: Add to `.gitignore`:
+   gh issue create --title "..." --body "..." --label "enhancement"
-  ```
+   ```
-  .genie/scripts/helpers/package.json
+
-  .genie/scripts/helpers/package-lock.json
+4. **Commit with reference:**
-  .genie/scripts/helpers/node_modules/
+   ```bash
-  ```
+   git commit -m "feat: Description
-- [learn-207] helpful=0 harmful=0: Install with `cd .genie/scripts/helpers && npm install`
 
-**4. Test with CLI:**
+   [body...]
-- [learn-208] helpful=0 harmful=0: Test using `genie helper <name>` (NOT full path)
-- [learn-209] helpful=0 harmful=0: Verify all flags/options work
-- [learn-210] helpful=0 harmful=0: Confirm output is clear and actionable
 
@@ -815 +815 @@
-**5. Document Usage:**
+   fixes #38"
-- [learn-211] helpful=0 harmful=0: Usage should be self-documenting via `--help`
+   ```
-- [learn-212] helpful=0 harmful=0: Clear error messages when misused
-- [learn-213] helpful=0 harmful=0: Exit codes: 0 = success, 1 = errors found/failure
 
-### Anti-Patterns
+### Correct Formats
 
-- [learn-214] helpful=0 harmful=0: ‚ùå Using full path `node .genie/scripts/helpers/script.js` instead of `genie helper script`
+- [learn-071] helpful=0 harmful=0: ‚úÖ `fixes #38` (correct commit issue link format)
-- [learn-215] helpful=0 harmful=0: ‚ùå Forgetting to register in index.js (script works but not discoverable)
+- [learn-072] helpful=0 harmful=0: ‚úÖ `closes #123` (correct commit issue link format)
-- [learn-216] helpful=0 harmful=0: ‚ùå Creating script without testing CLI access first
+- [learn-073] helpful=0 harmful=0: ‚úÖ `resolves #456` (correct commit issue link format)
-- [learn-217] helpful=0 harmful=0: ‚ùå Committing node_modules or package files (add to gitignore)
+- [learn-074] helpful=0 harmful=0: ‚úÖ `wish: wish-120-a-forge-drop-in-replacement` (correct wish link format)
-- [learn-218] helpful=0 harmful=0: ‚ùå Writing helper without clear --help output
 
-### Example: check-permissions Helper
+### Wrong Formats
 
@@ -830 +830 @@
-**Evidence:** 2025-11-21 session - Created helper to validate and fix agent frontmatter permissions
+- [learn-075] helpful=0 harmful=0: ‚ùå `Resolves: #38` (colon not recognized by GitHub)
+- [learn-076] helpful=0 harmful=0: ‚ùå `Related to #38` (doesn't close issue, not a linking keyword)
+- [learn-077] helpful=0 harmful=0: ‚ùå `Issue #38` (not a linking keyword, doesn't close issue)
 
-**Implementation:**
+### Enforcement
-```bash
-# 1. Created script
-.genie/scripts/helpers/check-permissions.js
 
-# 2. Registered in index.js
+- [learn-185] helpful=0 harmful=0: Pre-push hook: `.git/hooks/pre-push`
-{
+- [learn-186] helpful=0 harmful=0: Validator: `scripts/commit-advisory.cjs`
-  'check-permissions': {
+- [learn-187] helpful=0 harmful=0: Override (use sparingly): `GENIE_ALLOW_MAIN_PUSH=1 git push`
-    script: 'check-permissions.js',
+
-    description: 'Validate dangerously_skip_permissions settings...',
+**Why:** Track WHY code was written. Connect commits to requirements. Enable traceability from code ‚Üí issue ‚Üí discussion ‚Üí decision.
-    usage: ['genie helper check-permissions', '...--fix'],
-    examples: ['$ genie helper check-permissions']
-  }
-}
 
@@ -847 +847 @@
-# 3. Added dependencies to gitignore
+**Evidence:** `.genie/reports/learn/commit-must-link-to-issue-20251023.md`
-.genie/scripts/helpers/package.json  # (gitignored)
-.genie/scripts/helpers/node_modules/ # (gitignored)
 
-# 4. Tested with CLI
-$ genie helper check-permissions
-$ genie helper check-permissions --fix
-
-# 5. Result: Fixed 10 agent files, reusable tool created
-```
-
-**Benefits:**
-- [learn-219] helpful=0 harmful=0: Reusable across sessions
-- [learn-220] helpful=0 harmful=0: Discoverable via `genie helper list`
-- [learn-221] helpful=0 harmful=0: Consistent CLI interface
-- [learn-222] helpful=0 harmful=0: Can be run manually or in CI/CD
-- [learn-223] helpful=0 harmful=0: Self-contained with own dependencies
-
----
-
-## Commit Message Requirements üî¥ CRITICAL
-
-**Every commit must link to a work item for traceability.**
-
-### Required Format
-
-All commits must reference:
-- [learn-183] helpful=0 harmful=0: GitHub issue: `fixes #NNN`, `closes #NNN`, or `resolves #NNN`
-- [learn-184] helpful=0 harmful=0: OR Wish: `wish: wish-slug`
-
-### Before Committing
-
-1. **Check for existing issues:**
-   ```bash
-   gh issue list --search "keyword"
-   ```
-
-2. **Check for existing wishes:**
-   ```bash
-   ls .genie/wishes/ | grep -i keyword
-   ```
-
-3. **Create issue if needed:**
-   ```bash
-   gh issue create --title "..." --body "..." --label "enhancement"
-   ```
-
-4. **Commit with reference:**
-   ```bash
-   git commit -m "feat: Description
-
-   [body...]
-
-   fixes #38"
-   ```
-
-### Correct Formats
-
-- [learn-071] helpful=0 harmful=0: ‚úÖ `fixes #38` (correct commit issue link format)
-- [learn-072] helpful=0 harmful=0: ‚úÖ `closes #123` (correct commit issue link format)
-- [learn-073] helpful=0 harmful=0: ‚úÖ `resolves #456` (correct commit issue link format)
-- [learn-074] helpful=0 harmful=0: ‚úÖ `wish: wish-120-a-forge-drop-in-replacement` (correct wish link format)
-
-### Wrong Formats
-
-- [learn-075] helpful=0 harmful=0: ‚ùå `Resolves: #38` (colon not recognized by GitHub)
-- [learn-076] helpful=0 harmful=0: ‚ùå `Related to #38` (doesn't close issue, not a linking keyword)
-- [learn-077] helpful=0 harmful=0: ‚ùå `Issue #38` (not a linking keyword, doesn't close issue)
-
-### Enforcement
-
-- [learn-185] helpful=0 harmful=0: Pre-push hook: `.git/hooks/pre-push`
-- [learn-186] helpful=0 harmful=0: Validator: `scripts/commit-advisory.cjs`
-- [learn-187] helpful=0 harmful=0: Override (use sparingly): `GENIE_ALLOW_MAIN_PUSH=1 git push`
-
-**Why:** Track WHY code was written. Connect commits to requirements. Enable traceability from code ‚Üí issue ‚Üí discussion ‚Üí decision.
-
-**Evidence:** `.genie/reports/learn/commit-must-link-to-issue-20251023.md`
-
```

</details>

---

## Agent Instructions

This diff file documents all framework changes from v2.5.14 to v2.5.27-rc.2.

**Your task:**
1. **Learn** the new patterns and teachings from added/modified files
2. **Apply** necessary changes to workspace (preserve user customizations)
3. **Report** what was learned and what actions were taken

**Important:**
- Do NOT blindly copy files - understand the intent of each change
- Preserve user customizations in workspace files
- For conflicts, present options to user
- Create a report of learnings applied
